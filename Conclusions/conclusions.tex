%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8
% THESIS CONCLUSIONS
%\def\baselinestretch{1}
\chapter{Conclusions}
\label{chap:conclusions}
\ifpdf
    \graphicspath{{Conclusions/Figures/PNG/}{Conclusions/Figures/PDF/}{Conclusions/Figures/}}
\else
    \graphicspath{{Conclusions/Figures/EPS/}{Conclusions/Figures/}}
\fi
%\def\baselinestretch{1.66}

This thesis presented a kinematic control architecture for two cooperative autonomous underwater manipulators. The cooperation is done at kinematic level, exchanging vectors and matrices to produce a common tool Cartesian velocity. The cooperation scheme takes into account that underwater communication is difficult, and makes the amount of exchanged data as low as possible. Code implementation is suited to easily manages objectives (e.g. to delete offline some objectives to try a different method). Big effort has been made in provide a modular and flexible code architecture. For example, the dependency from the Robotics Operating System (ROS) is kept at minimum to make possible to easily adapt the code to a different kind of interface and/or simulator (which do not rely on ROS to communicate).\\
 The experimental results showed how the Task Priority Inverse Kinematic approach used can deal with an assembly task: the \textit{peg-in-hole}. Being an unexplored problem for cooperative underwater manipulator, the problem is simulated with many simplifications and assumptions.\\
Part of the problem deal with Computer Vision Algorithm. The thesis shows how some detection and tracking algorithm can be exploited to estimate the hole's pose. For the insertion phase, a force-torque sensor is used to help the accomplishment of the mission.\\
Both the Control and the Vision part can help other works in various robotics fields, not only related to underwater intervention missions.\\

In the Chapter \ref{chap:introduction}, an introduction about the context is given, and the previous works in the field has been recalled.\\
In Chapter \ref{chap:control} the principal points of the theory behind the Control Architecture are summarized. Here, the mathematical foundations for the Task Priority Inverse Kinematic approach are recalled, considering also a coordination policy between multiple agents that fits in the chosen approach.\\
In Chapter \ref{chap:method} the theory explained before is exploited to deal with the scenario stated by this thesis. A Force-Torque objective is inserted in the TPIK list to reduce the magnitude of forces and torques that act on the peg during the insertion phase. This is noticeable because it is used a \enquote{dynamic} information (the force and the torque) in a pure-kinematic method. A simple, but suitable for the scenario, list of objectives is then described. An additional routine, part not of the kinematic layer but more of the Mission Managing layer, is explained. Took the goal frame where the peg is driven to by the kinematic control, this new routine shift its origin according to the direction of the force acting on the peg. This is an additional method to further exploit the information given by the force-torque sensor.\\
In Chapter \ref{chap:results} simulated environment is detailed. The chosen simulator, UWSim, is introduced, along with some other underwater simulators that can be useful for the interested reader. To make the insertion phase realistic, collisions between the peg and the hole have been introduced. These collisions propagates through the whole robotic system, thus affecting the arm and the vehicle. Another routine is implemented to fake a firm grasp of the tool by the two robots. In real environment, this constraint is assured by frictional forces, but in a kinematic simulator like the used UWSim the frictions are not present. The tuning of the gains permits to not hide bad cooperation between the agents.  In the same Chapter \ref{chap:results}, assumptions to simplify the problem are explained, and an idea of how the Control Loop runs is given. Finally, results of the experiments done are presented and discussed. Three main experiments have been carried out: without hole's pose error, with a fixed error of 0.015m along one axis, and one final test which includes the Vision part with the hole's pose error given by the \textit{Detection} and the \textit{Tracking} algorithms used.\\
Chapter \ref{chap:vision} covers exclusively methods and tools used by the Vision Robot. No theoretical background is given because it would take out of the scope of this thesis. The Chapter gives an idea on how two computer vision libraries, \href{https://opencv.org/}{\textbf{OpenCV}} (Open Source Computer Vision Library) [\cite{opencv}] and \href{https://visp.inria.fr/}{\textbf{ViSP}} (Visual Servoing Platform) [\cite{visp}], are used. The Vision part is divided into two phases: Detection and Tracking. For both, different algorithms have been tested, compared and discussed. 
In particular, for the Detection part, some methods have been discarded and they have not been used any more for further trials, but they are anyway presented in Appendix \ref{chap:AppendixVision}. They are all OpenCV algorithms that can help in other applications.\\
The Appendix \ref{chap:AppendixCode} gives some details on how the software is implemented, together with a list of some useful libraries used that surely can help to develop control architecture in C++ programming language.\\

For on-going progress in this scenario, it can be useful for the reader to follow the TWINBOT project [\cite{TWINBOT2019}]. This thesis context derives from the scenario of this project, but it evolved independently because at the time this thesis was being developed, TWINBOT was in a very early stage.


\section{Further Works}
Since the novelty of the applications, further works can be done in various direction. For what concerns the experiments, a dynamic simulation, along with a dynamic controller, can be introduced to better analyse the methods used. Considering this means to include effects that increase the realism of the simulation, such as buoyancy, thrusters modelling, disturbances of the arm to the vehicle and vice-versa, real tool-grasping effects, even some water currents. Some works have been done in this direction but then not pursued due to the lack of time. These efforts, even if they are not presented in this thesis, show that the first step to introduce dynamics could be using the plugin \href{https://github.com/freefloating-gazebo/freefloating_gazebo}{FreeFloatingGazebo} [\cite{freeFloatingGazebo}], mentioned in section \ref{sec:simulators}. This one is the most simpler to use from the actual work because the scene (i.e. the file which describes the simulated scenario, such as the initial pose of objects and robots) would be the same and ROS would be always used as interface, so no big modifications on the code have to be made.\\

Regarding the actual chosen architecture, the force-torque task can be improved, for example considering a reference calculated not only as a proportional error between the desired force (that is zero) and the actual detected one. Another improvement can be for the Change Goal routine, to let the the forces and torques also modify the orientation of the goal frame and reduce/eliminate also the angular error from the real goal frame to the one estimated.\\

Additional methods can be explored regarding the insertion phase. This thesis concentrates only on collisions that may happen when the peg is already inside the hole. If some contact between the external surface of the hole's structure and the peg's tip happens, the mission fails (i.e. a stalemate where the peg bounces forever against the squared hole's surface, unable to find the hole). In the literature, various methods have been explored to find the hole on the surface. For example, researchers have considered the cases when the peg meets the hole with a bad alignment that creates a 2 or 3 points contact (as briefly explained in \ref{sec:artPeg}). However, to the best of this author's knowledge, the \textit{peg-in-hole} problem has never been studied when the protagonists are two autonomous mobile manipulator (in any scenarios, not specifically underwater ones), so can be interesting to adapt old methods to this particular (cooperative and underwater) field.\\

Towards a more realistic intervention missions, efforts can be spent to consider methods and tools to localize the robot underwater. In this thesis, it is assumed that all agents have a reference frame in common, but, usually, localization underwater is really an issue. Some cooperation (this time not at kinematic level) can be considered to make some surface vessels helping the underwater agents to localize themselves (a problem explored in the WiMUST project [\cite{wimust}]).\\

In this thesis, some assumptions have also been made for the Vision part. Further works could consider to relax some of them, for example to increase the difficulty of the detection and tracking phases. In an underwater scenario, not always the water permits to watch from afar, and illumination and distortions can be other important issues.\\

In general, there is always a lot of work to increase the capacity of intervention-AUV. For example, we can consider more specifically communication issues and techniques to exchange data between agents; especially in underwater scenario, we can't share too much information among robots and with too high frequency. Also, other kinds of assembly problem can be addressed: for instance a \textit{peg-in-hole} one where the \textit{peg} is held by only one robot and the \textit{hole} by another one. Some objectives of the TWINBOT project [\cite{TWINBOT2019}] aim to study these two lasted cited problems.

